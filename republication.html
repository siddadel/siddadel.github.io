
<!-- You can also include your own CSS styles -->
<style>
@import url('https://fonts.googleapis.com/css?family=Fira+Sans:400,600,700');
body{
  font-family: 'Fira Sans', sans-serif;
  background-image: url(https://ruralindiaonline.org/media/uploads/Visible_Work_Invisible_Women/Panel6/edited_m020_26.jpg);
  background-attachment: fixed;
  background-position: top;
}
 form { margin: 40px auto;width: 600px;border: 1px solid #cacaca;border-radius: 5px;background: rgba(255,255,255,0.92);;padding:30px 40px 10px 40px;box-shadow: 0px 0px 100px rgba(0,0,0,0.5);}
 input { display:block; margin: 0px;font-family: 'Fira Sans', sans-serif;}
  .link-box{
    width: 100%;
    font-size: 16px;
    height: 46px;
    padding: 8px;
    border: 1px solid #848484;
    border-radius: 4px;
  }
  h1{
    line-height: 30px;
    font-size: 20px;
    color: #ff3b00;
    padding: 7px 0px 0px 0px;
    margin-left: 88px;
  }
  h2{
    font-size: 13px;
    margin: 30px 0px 2px 0px;
    font-weight: 700;
    letter-spacing: 1.2px;
    color: #3e3e3e;
    text-transform: uppercase;
  }
  h3{
    font-size: 12px;
    color: #999;
    font-weight: 400;
  }
  table {
    display: table;
    border-collapse: separate;
    border-spacing: 2px;
    border-color: gray;
  }
  .submit-button{
    background-color: #FF3D08;
    color: white;
    margin: 30px 0px;
    padding: 14px 14px;
    font-size: 16px;
    border: none;
    border-radius: 4px;
    font-family: 'Fira Sans', sans-serif;
    cursor: pointer;
    width: 220px;
  }
  .date-selecter{
    height: 46px;
    font-size: 18px;
    background-color: white;
    padding-left: 10px;
    border-color: #ccc;
    border: 1px solid #848484;
    border-radius: 4px;
  }
  #output{
    max-width: 800px;
    background: white;
    margin: auto;
  }
    textarea{
    font-size: 12px;
    line-height: 16px;
    width: 100%;
    height: 160px;
    padding: 4px 6px;
    background: #f5f5f5;
    color: #5f5f5f;
    border-radius: 4px;
    font-family: monospace;
    border-color: #c3c3c3;
  }
  #final-output{
    margin-top: 40px;
    border-top: 2px solid #4e4e4e;
    padding-top: 30px;
  }
  table, td, th {
    /* border: 1px solid green; */
  }
  .already-copied{
    float: right;
    background: #b7b7b7;
    font-size: 12px;
    color: white;
    padding: 1px 7px;
    text-transform: uppercase;
    letter-spacing: 0.4px;
    border-radius: 3px;
  }
  p, ol, li{
    font-size: 14px;
    color: #636363;
  }
  .form-box{
    border-top: 2px solid #4e4e4e;
    margin-top: 30px;
  }
</style>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <!--link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css"-->
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<!-- The function will be called after the Google Script has executed -->
<script>

$(function(){
// $('#embedcode').hide();
$('#final-output').hide();
$('#alreadyCopied').hide();
$('#datepicker').datepicker({
    dateFormat: "dd-mm-yy"
});

$('#getcode').click(function() {
   if(link.value==''){
    alert("Please enter a valid PARI URL");
    return;
   }
   if (datepicker.value==''){
    alert("Please enter the date of publication");
    return;
   }

   var code =  "<div style='background:#F6F6F6;padding:20px;border-left:6px solid #F73B08;margin:30px 0px;'><img src='https://ruralindiaonline.org/static/img/logo.png' style='margin-right:24px;float:left;width:72px;'/><p style='font-family: FiraSans-Regular;font-size: 16px;color: #5A5A5A;letter-spacing:0.1px;margin:5px 0px 6px 0px;'>This <a style='color:#FF3D08;text-decoration:none;' href='"+link.value+"'>"+"article"+"</a> was originally published in the <a style='text-decoration:none;color:#FF3D08' href='https://ruralindiaonline.org/'>People's Archive of Rural India</a> on "+datepicker.value+"</p></div>";

      // Preventing default action of the event
    event.preventDefault();
    // Getting the height of the document
    var n = $(document).height();
    $('html, body').animate({ scrollTop: n }, 500);


   $('#output').html(code);
   $('#code').text(code);
  // $('#embedcode').show();
  $('#final-output').fadeIn(500).delay(1000);
  $('#alreadyCopied').show();
  $('#alreadyCopied').effect("shake", {distance:7}, {times:4});
    $("#code").select();
    document.execCommand('copy');

  });

$("#link").change(function() {
  if(/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i.test($("#link").val())){
    if(!link.value.includes("ruralindiaonline.org")){
      alert("This is not a PARI link. Please enter a valid ruralindiaonline.org link");
    }
  }else{
    alert("This is not a valid URL. Please enter a valid URL");
  }
});

});

$(function() {
$("#link").focus();
});
</script>




<!-- This is the actual HTML form -->
<form id="myForm">

  <img src='https://ruralindiaonline.org/static/img/logo.png' style='width:72px;margin:10px 0px 10px 0px;float: left;'/><h1>Attribution embed code generator</h1>
<p><b>Reproduction of article/videos and other PARI material</b><br/>We have changed the attribution line we require of those wishing to reproduce PARI stories and reports on their own sites. Henceforth, the attribution line you see below has to appear <u>above</u> the story’s main text and <u>below</u> the author’s byline. The new attribution appears as shown below:
<img src='example.png' style='width:100%;'/>
  <br/><br/>You will need to add a special embed code to your page in order to have the required attribution line. To generate the embed code:
<ol>
  <li>Enter the link to the article</li>
  <li>Enter the date of publication of the article</li>
</ol>
</p>
<div class="form-box">
  <h2>Paste the URL to the PARI article here</h2>
  <input type="url" id="link" class='link-box' id='linkBox'>
  <h2>Date of publication on PARI</h2>
  <input class='date-selecter' id='datepicker' type = 'text'>
</div>
<input class='submit-button' id="getcode" value="Generate attribution code">
<div id='final-output'>
  <div id="embedcode"><h2 style='margin-bottom:-25px;margin-top:0px;'>Embed Code</h2><span class='already-copied' id='alreadyCopied'>Copied to clipboard!</span><br/>
    <h3>This code has been copied into your clipboard. Please paste the code as-is as HTML in your CMS, before the article starts as per the PARI republication guidelines.</h3>
  <textarea spellcheck="false" id="code"></textarea></div>
  <h2 style='margin-bottom:-30px;'>Preview of how the above code will render on your page:</h2>
  <div id="output"></div>
</div>
</form>

<!-- Here the results of the form submission will be displayed -->
